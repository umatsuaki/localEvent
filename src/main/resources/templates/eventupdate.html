<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org">
    <head>
        <meta charset="UTF-8" />
        <title>イベント更新</title>
        <link rel="stylesheet"
            th:href="@{/webjars/bootstrap/5.2.3/css/bootstrap.min.css}" />
        <script th:src="@{/webjars/bootstrap/5.2.3/js/bootstrap.min.js}"
            type="text/javascript"></script>
    </head>
    <body>

        <div class="container">
            <div class="row">
                <div class="col-12 mb-3">
                    <nav aria-label="breadcrumb">
                        <ol class="breadcrumb">
                            <li class="breadcrumb-item"><a
                                    th:href="@{/}">Home</a></li>
                            <li class="breadcrumb-item"><a
                                    th:href="@{/eventlist}">イベントリスト</a></li>
                            <li class="breadcrumb-item active"
                                aria-current="page">イベント更新</li>
                        </ol>
                    </nav>
                    <h1>イベントを更新する</h1>
                    <form method="post"
                        th:action="@{/event/update/confirm/{eid}(eid=${eid})}"
                        th:object="${eventForm}" enctype="multipart/form-data">
                        <label for="name" class="form-label">イベントの名前</label>
                        <input class="form-control"
                            placeholder="イベントの名前" th:field="*{name}"
                            type=text id="name">
                        <label for="description"
                            class="form-label">イベントの説明</label>
                        <input class="form-control"
                            placeholder="イベントの説明"
                            th:field="*{description}" type=text
                            id="description">
                        <label for="startday"
                            class="form-label">イベントの開始日</label>
                        <input class="form-control"
                            placeholder="イベントの開始日"
                            required th:field="*{startday}" type=date
                            id="startday">
                        <label for="endday" class="form-label">イベントの終了日</label>
                        <input class="form-control"
                            placeholder="イベントの終了日"
                            th:field="*{endday}" type=date id="endday">
                        <label for="starttime"
                            class="form-label">イベントの開始時間</label>
                        <input class="form-control"
                            placeholder="イベントの開始時間"
                            th:field="*{starttime}" type=time id="starttime">
                        <label for="endtime"
                            class="form-label">イベントの終了時間</label>
                        <input class="form-control"
                            placeholder="イベントの終了時間"
                            th:field="*{endtime}" type=time id="endtime">
                        <label for="enddayOfApplication"
                            class="form-label">イベントの申し込み開始日</label>
                        <input class="form-control"
                            placeholder="イベントの申し込み開始日"
                            th:field="*{startdayOfApplication}"
                            type=date id="startdayOfApplication">
                        <label for="enddayOfApplication"
                            class="form-label">イベントの申し込み終了日</label>
                        <input class="form-control"
                            placeholder="イベントの申し込み終了日"
                            th:field="*{enddayOfApplication}"
                            type=date id="enddayOfApplication">
                        <label for="starttimeOfApplication"
                            class="form-label">イベントの申し込み開始時間</label>
                        <input class="form-control"
                            placeholder="イベントの申し込み開始時間"
                            th:field="*{starttimeOfApplication}"
                            type=time id="starttimeOfApplication">
                        <label for="endtimeOfApplication"
                            class="form-label">イベントの申し込み終了時間</label>
                        <input class="form-control"
                            placeholder="イベントの申し込み終了時間"
                            th:field="*{endtimeOfApplication}"
                            type=time id="endtimeOfApplication">
                        <label for="place" class="form-label">イベントの場所</label>
                        <input class="form-control"
                            placeholder="イベントの場所"
                            th:field="*{place}" type=text id="place">
                        <label for="fee" class="form-label">イベントの参加費用</label>
                        <input class="form-control"
                            placeholder="イベントの参加費用"
                            th:field="*{fee}" type=text id="fee">
                        <div class="form-check">
                            <input th:field="*{parking}" type="checkbox"
                                id="checkbox">`
                            <label class="form-check-label" for="checkbox">
                                <h4>駐車場があるかどうか</h4>
                            </label>
                        </div>
                        <label for="access" class="form-label">イベントのアクセス</label>
                        <input class="form-control"
                            placeholder="イベントのアクセス"
                            th:field="*{access}" type=text id="access">
                        <label for="aid" class="form-label">イベントの開催地域</label>
                        <select class="form-control"
                            th:name="aid"
                            th:id="aid">
                            <option th:each="area : ${areaList}"
                                th:value="${area.aid}"
                                th:field="*{aid}"
                                th:text="${area.name}"></option>
                        </select>
                        <label for="organizer"
                            class="form-label">イベントの主催者</label>
                        <input class="form-control"
                            placeholder="イベントの主催者"
                            th:field="*{organizer}" type=text id="organizer">
                        <label for="capacity"
                            class="form-label">イベントの参加人数</label>
                        <input class="form-control"
                            placeholder="イベントの参加人数"
                            th:field="*{capacity}" type=text id="capacity">
                        <label for="contact"
                            class="form-label">イベントの問い合わせ先</label>
                        <input class="form-control"
                            placeholder="イベントの問い合わせ先"
                            th:field="*{contact}" type=text id="contact">
                        <label for="url" class="form-label">イベントのURL</label>
                        <input class="form-control"
                            placeholder="イベントのURL"
                            th:field="*{url}" type=text id="url">
                        <div>
                            <div class="form-group mb-3">
                                <label for="image"
                                    class="form-label">イベントの画像</label>
                                <input class="form-control-file"
                                    placeholder="イベントの画像"
                                    th:field="*{image}" type="file" id="image">
                            </div>

                            <div class="text-center mb-3">
                                <a
                                    th:href="@{/event/update/deleteImage/{eid}(eid=${eid})}"
                                    class="btn btn-secondary">画像を削除する</a>
                            </div>

                        </div>
                        <input class="btn btn-primary" type="submit"
                            value="更新する">
                    </form>

                    <script th:inline="javascript">
                        var aid = /*[[${aid}]]*/ 0;
                        document.getElementById("name").value = /*[[${name}]]*/ "";
                        document.getElementById("description").value = /*[[${description}]]*/ "";
                        document.getElementById("startday").value = /*[[${startday}]]*/ "";
                        document.getElementById("endday").value = /*[[${endday}]]*/ "";
                        document.getElementById("starttime").value = /*[[${starttime}]]*/ "";
                        document.getElementById("endtime").value = /*[[${endtime}]]*/ "";
                        document.getElementById("startdayOfApplication").value = /*[[${startdayOfApplication}]]*/ "";
                        document.getElementById("enddayOfApplication").value = /*[[${enddayOfApplication}]]*/ "";
                        document.getElementById("starttimeOfApplication").value = /*[[${starttimeOfApplication}]]*/ "";
                        document.getElementById("endtimeOfApplication").value = /*[[${endtimeOfApplication}]]*/ "";
                        document.getElementById("place").value = /*[[${place}]]*/ "";
                        document.getElementById("fee").value = /*[[${fee}]]*/ "";
                        document.getElementById("checkbox").checked = /*[[${parking}]]*/ false;
                        document.getElementById("access").value = /*[[${access}]]*/ "";
                        document.getElementById("organizer").value = /*[[${organizer}]]*/ "";
                        document.getElementById("capacity").value = /*[[${capacity}]]*/ "";
                        document.getElementById("contact").value = /*[[${contact}]]*/ "";
                        document.getElementById("url").value = /*[[${url}]]*/ "";
                        document.getElementById("aid").selectedIndex = aid - 1;
                    </script>

                    <h2 th:if="${isEventUpdateSuccess}"
                        class="text-danger">イベントが更新されました</h2>

                </div>
            </div>
        </div>
    </body>
</html>